# ТЗ

## 1.	ВВЕДЕНИЕ
Данное техническое задание определяет функции, которые должна включать конечная система поиска. Инструменты реализации и внешний вид приложения, а также база поисковой системы (Solr, ElasticSearch) остаются на выбор разработчиков.

##  2.	ДАННЫЕ — DATA
Структура данных:
- `id (text)` — уникальный идентификатор — id фильма на сайте imdb.com, бустинг не нужен.
- `title (text)` — название фильма — использовать бустинг \*
- `year (integer)` — год выхода фильма — бустинг не нужен
- `rating (float)` — пользовательский рейтинг фильма IMDB — бустинг не нужен
- `genres (text[])` — жанр фильма — использовать бустинг \*
- `directors (text[])` — режиссер(ы) фильма — использовать бустинг \*
- `release_dates (text[])` — даты выхода фильма по странам — бустинг не нужен
- `top_3_cast (text[])` — 3 первых актера из каста фильма— использовать бустинг*
- `storyline (text)` — аннотация — использовать бустинг \*
- `synopsis (text)` — синопсис — использовать бустинг \*
\* способы применения бустинга будут описаны в соответствующей главе

При индексировании данных учесть, что несколько полей являются массивами.

## 3.	БУСТИНГ — BOOSTING
Бустинг — это способ перераспределения весов во время поиска. С помощью бустинга можно увеличивать значимость одних полей или терминов (слов) и уменьшить у других, за что позволяет создать гибкую систему поиска.

В реализуемом приложении предлагается использовать query boosting т.е. бустинг во время выполнения запроса. Ввиду небольшого количества данных, снижение производительности будет незначительным, при использовании query-based boosting в сравнении с index-time boosting, при котором веса распределяются на этапе индексации документов.

В конечной системе необходимо реализовать поиск, который будет иметь следующие возможности и настройки:
- Поиск по всем полям (бустинг не накладывается ни на одно поле)
- Поиск по одному полю
- Поиск по всем полям, но с выделением приоритетного поля (в идеале дать пользователю возможность задать иерархию полей т.е. бустинг может накладываться не на одно конкретное, а на все одновременно, в зависимости от их положения в иерархии)
- Поиск с выделением ключевых слов, например с помощью заключения в «» (бустинг терминов)
![alt text](/img/01.png)
![alt text](/img/02.png)

## 4.	ВЫДЕЛЕНИЕ РЕЗУЛЬТАТА — RESULTS HIGHLIGHTING
Выделение результатов подсвечивает части данных совпадающие с запросом пользователя, что делает систему поиска более наглядной.

Внедрить в конечную систему инструменты выделения результатов поиска. Инструмент графического выделения выбрать самостоятельно, в зависимости от используемых технологий.
![alt text](/img/03.png)

## 5.	СПОНСОРСКИЙ ПОИСК — SPONSORED SEARCH
Спонсорский поиск является инструментом рекламы и продвижения желаемых результатов поиска в топ поисковой выдачи. Один из возможных способов исполнения это index-time query boosting .

Вложить в систему несколько примеров спонсорского поиска.
- Вариант реализации (но обязательный): бустинг конкретных запросов во время составления индекса документов.
- Предусмотреть возможность отключения спонсорской выдачи (для тестирования или привилегированных пользователей).
- Отмечать «спонсированные» пункты в общей выдаче результатов поиска (метка Ad или что то иное)
- Продумать поведение списка выдачи во время сортировки (должны ли спонсированные пункты игнорировать общую сортировку или нет).
Для возможности пользовательского спонсирования, добавить вкладку с соответствующей функцией. В ней создать поле для поиска, которое должно будет однозначно идентифицировать фильм, который будет «спонсирован», а также поле для формирования запроса, который будет сохранен как спонсированный (все правила составления запроса должны соответствовать основному полю ввода и также включать все перечисленные в тз функции).
Придумать способ хранения новых спонсорских запросов (исключая перестраивание индекса).
![alt text](/img/04.png)
![alt text](/img/05.png)

## 6.	АВТОПОДСТАНОВКА — AUTOCOMPLETE
Автоподстановка удобный инструмент, позволяющий пользователю сократить время на ввод запроса, за счет выбора из предполагаемых системой вариантов его завершения.

Встроить механизм автоподстановки в конечную систему:
- Реализовать singleterm suggestion (обязательно)
- Реализовать multiterm unordered suggestion (не обязательно)
- Реализовать multiterm ordered suggestion (не обязательно)
![alt text](/img/06.png)

## 7.	QUERY RE-RANKING
Рескоринг — это способ увеличить точность поисковой выдачи, используя поэтапное усложнения запроса и алгоритма поиска по нему. Принцип действия следующий: получая часть запроса (например одно слово) система с помощью простого алгоритма ищет записи с таким вхождением, далее при усложнении запроса (добавлении слов) система уже ищет не во всем множестве документов, а только в той части, которая получилась на первом этапе и при этому используются более сложные и точные алгоритмы поиска. Такой подход кроме увеличения точности, может положительно сказаться на производительности всей поисковой системы.

Внедрить описанный выше алгоритм в конечную систему.
## 8.	ГРУППИРОВКА РЕЗУЛЬТАТОВ — RESULTS GROUPING (FACETING)
Группировка результатов позволяет объединять результаты поиска в категории, в зависимости от наличия в них общих атрибутов. Например при поиске фильмов по названию, результаты можно было бы сгруппировать по году выхода, стране или задействованным актерам.

Добавить возможность выбора поля(комбинаций полей) для группировки результатов.
По возможности реализовать вложенные группировки.
![alt text](/img/07.png)

## 9.	MORE LIKE THIS
Данный инструмент позволяет поисковой системе предлагать варианты объектов, которые не соответствуют текущему запросу, но имеют некоторое количество общих признаков с элементами текущей выборки

Внедрить описанный механизм в систему поиска.
Добавлять к выдаче по основному запросу 2-3 morelikethis варианта.
При отсутствии результатов по основному запросу, заполнить выдачу morelikethis вариантами.
Добавить в приложение вкладку с полной информацией о фильме. Встроить в нее блок morelikethis вариантов.
![alt text](/img/08.png)
![alt text](/img/09.png)

## 10.	SPANQUERIES
Span queries — это вид запросов, в которых можно задать структуру искомого значения, например сделать запрос на поиск именно по второму слову или по частям фразы. В таких запросах можно задать последовательность терминов и расстояние между ними.

Встроить данный вид запросов в конечную систему. Придумать интуитивно понятный синтаксис для пользовательского поиска.
![alt text](/img/10.png)
![alt text](/img/11.png)

## 11.	РАСШИРЯЕМОСТЬ СЕРВИСА
Заложить в конечную систему возможность расширения дополнительными модулями, предоставляющими новые функции. Например, анализ тональности. Взаимодействие с модулями расширения предполагается осуществлять через протокол HTTP.

## 12. 12.	КРИТЕРИИ УСПЕХА
Конечная система должна включать в себя все выше описанные функции, включая возможность расширения дополнительными модулями.

Интерфейс должен быть интуитивно понятным и приятно выглядящим с эстетической точки зрения. Минимальное количество элементов управления и отображения. Эскизы предоставленные в ТЗ являются лишь схематическими изображениями предполагаемого интерфейса и не должны быть использованы без серьезных изменений в приложении.

Оптимизация работы приложения должна позволять нескольким пользователям одновременно работать без потери скорости работы и качества.

Продуманная система распространения и развертывания приложения, если это дэсктоп-приложение. Обеспечить максимальную отказоустойчивость и возможность автоматической реинициализации, если это веб-приложение.

Исключить блокировку базы данных и составляющих индекса документов.

Мультиплатформенность.
